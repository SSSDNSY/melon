(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e4a0f88"],{9538:function(e,t,a){"use strict";a("99f9")},"99f9":function(e,t,a){},"9af6":function(e,t,a){var n={"./el-button.js":"f585","./el-checkbox-group.js":"2e71","./el-divider.js":"651c","./el-input.js":"4262","./el-link.js":"83b6","./el-radio-group.js":"c81f","./el-select.js":"f133","./el-upload.js":"59f6","./index.js":"3c5a"};function i(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id="9af6"},ca1c:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"btn"},[a("div",{staticClass:"btn-content"},[a("span",[a("el-button",{attrs:{type:"info"},on:{click:e.draftForm}},[e._v("暂存")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1)])]),a("div",[a("el-row",{staticClass:"form-builder",attrs:{gutter:e.formConf.gutter}},[a("el-form",{ref:e.formConf.formModel,attrs:{rules:e.rules,size:e.formConf.size,model:e.form,"label-position":e.formConf.labelPosition,disabled:e.formConf.disabled,"validate-on-rule-change":!1,"label-width":e.formConf.labelWidth+"px"}},[e._l(e.itemList,(function(t,n){return["row"===t.compType?a("preview-row-item",{key:"row-"+n,attrs:{model:t}},e._l(t.columns,(function(t){return a("el-col",{key:t.index,attrs:{span:t.span}},[e._l(t.list,(function(t){return["dynamicTable"!==t.compType?a("preview-item",{key:t.id,attrs:{model:t},on:{valChange:e.handlerValChange},model:{value:e.form[t.id],callback:function(a){e.$set(e.form,t.id,a)},expression:"form[col.id]"}}):"dynamicTable"===t.compType?a("fancy-dynamic-table",{key:"dynamic-"+n,ref:"dynamicTable",refInFor:!0,attrs:{data:e.form[t.id],conf:t},on:{addRow:e.handlerAddRow,deleteRow:e.handlerDeleteRow},scopedSlots:e._u([{key:"item",fn:function(n){var i=n.rowScope,o=n.item;return[a("fancy-dynamic-table-item",{key:"tableIndex-"+i.$index,attrs:{model:o,parent:t,index:i.$index},on:{valChange:e.handlerDynamicValChange},model:{value:i.row[o.id],callback:function(t){e.$set(i.row,o.id,t)},expression:"rowScope.row[item.id]"}})]}}],null,!0)}):e._e()]}))],2)})),1):"dynamicTable"===t.compType?a("fancy-dynamic-table",{key:"dynamic-"+n,ref:t.id,refInFor:!0,attrs:{data:e.form[t.id],conf:t},on:{addRow:e.handlerAddRow,deleteRow:e.handlerDeleteRow},scopedSlots:e._u([{key:"item",fn:function(n){var i=n.rowScope,o=n.item;return[a("fancy-dynamic-table-item",{key:"tableIndex-"+i.$index,ref:o.id+i.$index,refInFor:!0,attrs:{model:o,parent:t,index:i.$index},on:{valChange:e.handlerDynamicValChange},model:{value:i.row[o.id],callback:function(t){e.$set(i.row,o.id,t)},expression:"rowScope.row[item.id]"}})]}}],null,!0)}):"table"===t.compType?a("fancy-edit-table",{attrs:{layoutArray:t.layoutArray,tdStyle:t.tdStyle,width:t.width,height:t.height},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.td;return[e._l(n.columns,(function(t){return["dynamicTable"!==t.compType?a("preview-item",{key:t.id,attrs:{model:t},on:{valChange:e.handlerValChange},model:{value:e.form[t.id],callback:function(a){e.$set(e.form,t.id,a)},expression:"form[col.id]"}}):e._e()]}))]}}],null,!0)}):a("el-col",{key:n,staticClass:"drag-col-wrapper",attrs:{span:t.span}},[a("preview-item",{attrs:{model:t},on:{valChange:e.handlerValChange},model:{value:e.form[t.id],callback:function(a){e.$set(e.form,t.id,a)},expression:"form[element.id]"}})],1)]}))],2)],1)],1)])},i=[],o=(a("b64b"),a("e9c4"),a("0a41")),r=a("38a4"),l=a("ed55"),d=a("2ad6"),s=a("7fe9"),c=a("70da"),f={name:"dynamicFormEdit",props:{value:{type:String,default:""},buildData:{type:String,default:""},disabled:{type:Boolean,default:!1}},components:{previewItem:o["a"],previewRowItem:r["a"],fancyDynamicTable:l["a"],fancyDynamicTableItem:d["a"],fancyEditTable:c["a"]},data:function(){return{form:{},rules:{},currentIndex:-1,formVal:""}},mounted:function(){var e=this;this.$nextTick((function(){if(""!==e.value&&null!==e.value){var t=JSON.parse(e.value);e.handlerFillDatas(t)}}))},methods:{draftForm:function(){this.validate(),this.$emit("draftForm",this.buildData,this.formVal)},submitForm:function(){var e=this;this.validate(),this.$refs[this.formConf.formModel].validate((function(t){t&&e.$emit("submitForm",e.buildData,e.formVal)}))},handlerValChange:function(e,t){this.$set(this.form,e,t)},handlerDynamicValChange:function(e,t,a,n){this.$set(this.form[e][t],a,n),this.currentIndex=t},validate:function(){var e=this;this.$refs[this.formConf.formModel].validate((function(t){t?(e.formVal=JSON.stringify(e.form,null,4),e.$emit("input",JSON.stringify(e.form,null,4))):e.$emit("input","")}))},handlerAddRow:s["a"],handlerDeleteRow:s["c"],handlerInitDatas:s["b"],handlerFillDatas:s["d"]},created:function(){this.handlerInitDatas()},computed:{itemList:function(){if(""!==this.buildData){var e=JSON.parse(this.buildData);return e.list}return[]},formConf:function(){if(""!==this.buildData){var e=JSON.parse(this.buildData);return e.config.disabled=this.disabled,e.config}return{}}}},u=f,m=(a("9538"),a("2877")),h=Object(m["a"])(u,n,i,!1,null,"63233e12",null);t["default"]=h.exports}}]);