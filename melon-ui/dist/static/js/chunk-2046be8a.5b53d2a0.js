(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2046be8a"],{"4b62":function(e,n,t){},"7c41":function(e,n,t){"use strict";t("84e4")},"7cd7":function(e,n,t){"use strict";t.r(n);var a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("Bpmn")},i=[],o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"containers"},[t("div",{ref:"canvas",staticClass:"canvas"}),e.bpmnModeler?t("panel",{attrs:{modeler:e.bpmnModeler}}):e._e(),t("div",{staticClass:"toolbar"},[t("a",{attrs:{title:"download"}},[e._v("下载")]),t("a",{ref:"saveDiagram",attrs:{href:"javascript:",title:"download BPMN diagram"}},[e._v("BPMN")]),t("a",{ref:"saveSvg",attrs:{href:"javascript:",title:"download as SVG image"}},[e._v("SVG")])])],1)},s=[],l=t("7024"),r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{ref:"propertyPanel",staticClass:"property-panel"},[t("el-form",{attrs:{inline:!0,model:e.form,"label-width":"100px",size:"small"}},[t("el-form-item",{attrs:{label:"节点ID"}},[t("el-input",{attrs:{disabled:""},model:{value:e.form.id,callback:function(n){e.$set(e.form,"id",n)},expression:"form.id"}})],1),t("el-form-item",{attrs:{label:"节点名称"}},[t("el-input",{on:{input:e.nameChange},model:{value:e.form.name,callback:function(n){e.$set(e.form,"name",n)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"节点颜色"}},[t("el-color-picker",{on:{"active-change":e.colorChange},model:{value:e.form.color,callback:function(n){e.$set(e.form,"color",n)},expression:"form.color"}})],1),e.userTask?t("el-form-item",{attrs:{label:"节点人员"}},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:e.typeChange},model:{value:e.form.userType,callback:function(n){e.$set(e.form,"userType",n)},expression:"form.userType"}},[t("el-option",{attrs:{value:"assignee",label:"指定人员"}}),t("el-option",{attrs:{value:"candidateUsers",label:"候选人员"}}),t("el-option",{attrs:{value:"candidateGroups",label:"角色/岗位"}})],1)],1):e._e(),e.userTask&&"assignee"===e.form.userType?t("el-form-item",{attrs:{label:"指定人员"}},[t("el-select",{key:"1",attrs:{placeholder:"请选择"},on:{change:function(n){return e.addUser({assignee:n})}},model:{value:e.form.assignee,callback:function(n){e.$set(e.form,"assignee",n)},expression:"form.assignee"}},e._l(e.users,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e.userTask&&"candidateUsers"===e.form.userType?t("el-form-item",{attrs:{label:"候选人员"}},[t("el-select",{key:"2",attrs:{placeholder:"请选择",multiple:""},on:{change:function(n){return e.addUser({candidateUsers:n.join(",")||n})}},model:{value:e.form.candidateUsers,callback:function(n){e.$set(e.form,"candidateUsers",n)},expression:"form.candidateUsers"}},e._l(e.users,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e.userTask&&"candidateGroups"===e.form.userType?t("el-form-item",{attrs:{label:"角色/岗位"}},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:function(n){return e.addUser({candidateGroups:n})}},model:{value:e.form.candidateGroups,callback:function(n){e.$set(e.form,"candidateGroups",n)},expression:"form.candidateGroups"}},e._l(e.roles,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e.sequenceFlow?t("el-form-item",{attrs:{label:"分支条件"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.user,callback:function(n){e.$set(e.form,"user",n)},expression:"form.user"}},e._l(e.users,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e()],1)],1)},c=[],d=t("5530"),m=(t("b0c0"),t("b64b"),t("d3b7"),{name:"PropertyPanel",props:{modeler:{type:Object,required:!0}},computed:{userTask:function(){if(this.element)return"bpmn:UserTask"===this.element.type},sequenceFlow:function(){if(this.element)return"bpmn:SequenceFlow"===this.element.type}},data:function(){return{form:{id:"",name:"",color:null},element:{},users:[{value:"zhangsan",label:"张三"},{value:"lisi",label:"李四"},{value:"wangwu",label:"王五"}],roles:[{value:"manager",label:"经理"},{value:"personnel",label:"人事"},{value:"charge",label:"主管"}]}},mounted:function(){this.handleModeler()},methods:{handleModeler:function(){var e=this;this.modeler.on("selection.changed",(function(n){var t=n.newSelection[0];e.element=t,console.log(e.element),t&&(e.form=Object(d["a"])(Object(d["a"])({},t.businessObject),t.businessObject.$attrs),"candidateUsers"===e.form.userType&&(e.form["candidateUsers"]=e.form["candidateUsers"].split(",")||[]))})),this.modeler.on("element.changed",(function(n){var t=n.element;t&&t.id===e.form.id&&(e.form.name=t.businessObject.name,e.form=Object(d["a"])({},e.form))}))},nameChange:function(e){var n=this.modeler.get("modeling");n.updateLabel(this.element,e)},colorChange:function(e){var n=this.modeler.get("modeling");n.setColor(this.element,{fill:null,stroke:e}),n.updateProperties(this.element,{color:e})},addUser:function(e){this.updateProperties(Object.assign(e,{userType:Object.keys(e)[0]}))},typeChange:function(){var e=this,n=["assignee","candidateUsers","candidateGroups"];n.forEach((function(n){delete e.element.businessObject.$attrs[n],delete e.form[n]}))},updateProperties:function(e){var n=this.modeler.get("modeling");n.updateProperties(this.element,e)}}}),u=m,p=(t("ccae"),t("2877")),b=Object(p["a"])(u,r,c,!1,null,"12934dec",null),f=b.exports,w=t("d4ec"),g=t("bee2"),h=(t("4de4"),function(){function e(){Object(w["a"])(this,e),this.controls=[],this.init()}return Object(g["a"])(e,[{key:"init",value:function(){this.controls=[{action:"create.start-event",title:"开始"},{action:"create.intermediate-event",title:"中间"},{action:"create.end-event",title:"结束"},{action:"create.exclusive-gateway",title:"网关"},{action:"create.task",title:"任务"},{action:"create.user-task",title:"用户任务"},{action:"create.user-sign-task",title:"会签任务"},{action:"create.subprocess-expanded",title:"子流程"},{action:"create.data-object",title:"数据对象"},{action:"create.data-store",title:"数据存储"},{action:"create.participant-expanded",title:"扩展流程"},{action:"create.group",title:"分组"}]}},{key:"getControl",value:function(e){var n=this.controls.filter((function(n){return n.action===e}));return n[0]||{}}}]),e}()),v={name:"Bpmn",data:function(){return{bpmnModeler:null,element:null,bpmData:new h}},components:{panel:f},methods:{createNewDiagram:function(){var e=this,n='\n      <?xml version="1.0" encoding="UTF-8"?>\n        <bpmn2:definitions xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="sample-diagram" targetNamespace="http://bpmn.io/schema/bpmn" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd">\n          <bpmn2:process id="process1567044459787" name="流程1567044459787">\n            <bpmn2:documentation>描述</bpmn2:documentation>\n            <bpmn2:startEvent id="StartEvent_01ydzqe" name="开始">\n              <bpmn2:outgoing>SequenceFlow_1qw929z</bpmn2:outgoing>\n            </bpmn2:startEvent>\n            <bpmn2:sequenceFlow id="SequenceFlow_1qw929z" sourceRef="StartEvent_01ydzqe" targetRef="Task_1piqdk6" />\n            <bpmn2:userTask id="Task_1piqdk6" name="请假申请">\n              <bpmn2:incoming>SequenceFlow_1qw929z</bpmn2:incoming>\n              <bpmn2:outgoing>SequenceFlow_11h4o22</bpmn2:outgoing>\n            </bpmn2:userTask>\n            <bpmn2:exclusiveGateway id="ExclusiveGateway_0k39v3u">\n              <bpmn2:incoming>SequenceFlow_11h4o22</bpmn2:incoming>\n              <bpmn2:outgoing>SequenceFlow_1iu7pfe</bpmn2:outgoing>\n              <bpmn2:outgoing>SequenceFlow_04uqww2</bpmn2:outgoing>\n            </bpmn2:exclusiveGateway>\n            <bpmn2:sequenceFlow id="SequenceFlow_11h4o22" sourceRef="Task_1piqdk6" targetRef="ExclusiveGateway_0k39v3u" />\n            <bpmn2:sequenceFlow id="SequenceFlow_1iu7pfe" sourceRef="ExclusiveGateway_0k39v3u" targetRef="Task_10fqcwp" />\n            <bpmn2:userTask id="Task_10fqcwp" name="经理审批">\n              <bpmn2:incoming>SequenceFlow_1iu7pfe</bpmn2:incoming>\n              <bpmn2:outgoing>SequenceFlow_1xod8nh</bpmn2:outgoing>\n            </bpmn2:userTask>\n            <bpmn2:sequenceFlow id="SequenceFlow_04uqww2" sourceRef="ExclusiveGateway_0k39v3u" targetRef="Task_15n23yh" />\n            <bpmn2:userTask id="Task_15n23yh" name="总部审批">\n              <bpmn2:incoming>SequenceFlow_04uqww2</bpmn2:incoming>\n              <bpmn2:outgoing>SequenceFlow_0c8wrs4</bpmn2:outgoing>\n            </bpmn2:userTask>\n            <bpmn2:exclusiveGateway id="ExclusiveGateway_1sq33g6">\n              <bpmn2:incoming>SequenceFlow_0c8wrs4</bpmn2:incoming>\n              <bpmn2:incoming>SequenceFlow_1xod8nh</bpmn2:incoming>\n              <bpmn2:outgoing>SequenceFlow_0h8za82</bpmn2:outgoing>\n            </bpmn2:exclusiveGateway>\n            <bpmn2:sequenceFlow id="SequenceFlow_0c8wrs4" sourceRef="Task_15n23yh" targetRef="ExclusiveGateway_1sq33g6" />\n            <bpmn2:sequenceFlow id="SequenceFlow_1xod8nh" sourceRef="Task_10fqcwp" targetRef="ExclusiveGateway_1sq33g6" />\n            <bpmn2:endEvent id="EndEvent_0pnmjd3">\n              <bpmn2:incoming>SequenceFlow_0h8za82</bpmn2:incoming>\n            </bpmn2:endEvent>\n            <bpmn2:sequenceFlow id="SequenceFlow_0h8za82" sourceRef="ExclusiveGateway_1sq33g6" targetRef="EndEvent_0pnmjd3" />\n          </bpmn2:process>\n          <bpmndi:BPMNDiagram id="BPMNDiagram_1">\n            <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="process1567044459787">\n              <bpmndi:BPMNShape id="StartEvent_01ydzqe_di" bpmnElement="StartEvent_01ydzqe">\n                <dc:Bounds x="532" y="72" width="36" height="36" />\n                <bpmndi:BPMNLabel>\n                  <dc:Bounds x="539" y="53" width="22" height="14" />\n                </bpmndi:BPMNLabel>\n              </bpmndi:BPMNShape>\n              <bpmndi:BPMNEdge id="SequenceFlow_1qw929z_di" bpmnElement="SequenceFlow_1qw929z">\n                <di:waypoint x="550" y="108" />\n                <di:waypoint x="550" y="150" />\n              </bpmndi:BPMNEdge>\n              <bpmndi:BPMNShape id="UserTask_1qxjy46_di" bpmnElement="Task_1piqdk6">\n                <dc:Bounds x="500" y="150" width="100" height="80" />\n              </bpmndi:BPMNShape>\n              <bpmndi:BPMNShape id="ExclusiveGateway_0k39v3u_di" bpmnElement="ExclusiveGateway_0k39v3u" isMarkerVisible="true">\n                <dc:Bounds x="525" y="275" width="50" height="50" />\n              </bpmndi:BPMNShape>\n              <bpmndi:BPMNEdge id="SequenceFlow_11h4o22_di" bpmnElement="SequenceFlow_11h4o22">\n                <di:waypoint x="550" y="230" />\n                <di:waypoint x="550" y="275" />\n              </bpmndi:BPMNEdge>\n              <bpmndi:BPMNEdge id="SequenceFlow_1iu7pfe_di" bpmnElement="SequenceFlow_1iu7pfe">\n                <di:waypoint x="575" y="300" />\n                <di:waypoint x="680" y="300" />\n                <di:waypoint x="680" y="380" />\n              </bpmndi:BPMNEdge>\n              <bpmndi:BPMNShape id="UserTask_18pwui1_di" bpmnElement="Task_10fqcwp">\n                <dc:Bounds x="630" y="380" width="100" height="80" />\n              </bpmndi:BPMNShape>\n              <bpmndi:BPMNEdge id="SequenceFlow_04uqww2_di" bpmnElement="SequenceFlow_04uqww2">\n                <di:waypoint x="525" y="300" />\n                <di:waypoint x="430" y="300" />\n                <di:waypoint x="430" y="380" />\n              </bpmndi:BPMNEdge>\n              <bpmndi:BPMNShape id="UserTask_1j0us24_di" bpmnElement="Task_15n23yh">\n                <dc:Bounds x="380" y="380" width="100" height="80" />\n              </bpmndi:BPMNShape>\n              <bpmndi:BPMNShape id="ExclusiveGateway_1sq33g6_di" bpmnElement="ExclusiveGateway_1sq33g6" isMarkerVisible="true">\n                <dc:Bounds x="525" y="515" width="50" height="50" />\n              </bpmndi:BPMNShape>\n              <bpmndi:BPMNEdge id="SequenceFlow_0c8wrs4_di" bpmnElement="SequenceFlow_0c8wrs4">\n                <di:waypoint x="430" y="460" />\n                <di:waypoint x="430" y="540" />\n                <di:waypoint x="525" y="540" />\n              </bpmndi:BPMNEdge>\n              <bpmndi:BPMNEdge id="SequenceFlow_1xod8nh_di" bpmnElement="SequenceFlow_1xod8nh">\n                <di:waypoint x="680" y="460" />\n                <di:waypoint x="680" y="540" />\n                <di:waypoint x="575" y="540" />\n              </bpmndi:BPMNEdge>\n              <bpmndi:BPMNShape id="EndEvent_0pnmjd3_di" bpmnElement="EndEvent_0pnmjd3">\n                <dc:Bounds x="532" y="602" width="36" height="36" />\n              </bpmndi:BPMNShape>\n              <bpmndi:BPMNEdge id="SequenceFlow_0h8za82_di" bpmnElement="SequenceFlow_0h8za82">\n                <di:waypoint x="550" y="565" />\n                <di:waypoint x="550" y="602" />\n              </bpmndi:BPMNEdge>\n            </bpmndi:BPMNPlane>\n          </bpmndi:BPMNDiagram>\n        </bpmn2:definitions>\n      ';this.bpmnModeler.importXML(n,(function(n){n?console.error(n):e.adjustPalette()}))},adjustPalette:function(){try{var e=this.$refs.canvas,n=e.children[0].children[1].children[4],t={width:"130px",padding:"5px",background:"white",left:"20px",borderRadius:0};for(var a in t)n.style[a]=t[a];var i=n.children[0],o=i.children;for(var s in o[0].style["display"]="none",o){var l=o[s];for(var r in l.children){var c=l.children[r],d={display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",padding:"5px"};if(c.className&&c.dataset&&-1!==c.className.indexOf("entry")){var m=this.bpmData.getControl(c.dataset.action);for(var u in c.innerHTML="<div style='font-size: 14px;font-weight:500;margin-left:15px;'>".concat(m["title"],"</div>"),d)c.style[u]=d[u]}}}}catch(p){console.log(p)}},saveSVG:function(e){this.bpmnModeler.saveSVG(e)},saveDiagram:function(e){this.bpmnModeler.saveXML({format:!0},(function(n,t){e(n,t)}))},setEncoded:function(e,n,t){var a=encodeURIComponent(t);this.xmlStr=t,t&&(e.className="active",e.href="data:application/bpmn20-xml;charset=UTF-8,"+a,e.download=n)}},mounted:function(){var e=this.$refs.canvas;this.bpmnModeler=new l["a"]({container:e});var n=this.$refs.saveDiagram,t=this.$refs.saveSvg,a=this;this.bpmnModeler.on("commandStack.changed",(function(){a.saveSVG((function(e,n){a.setEncoded(t,"diagram.svg",e?null:n)})),a.saveDiagram((function(e,t){a.setEncoded(n,"diagram.bpmn",e?null:t)}))})),this.createNewDiagram()}},y=v,_=(t("7c41"),Object(p["a"])(y,o,s,!1,null,null,null)),x=_.exports,q={components:{Bpmn:x}},k=q,E=Object(p["a"])(k,a,i,!1,null,null,null);n["default"]=E.exports},"84e4":function(e,n,t){},ccae:function(e,n,t){"use strict";t("4b62")}}]);