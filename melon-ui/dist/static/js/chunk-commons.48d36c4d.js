(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-commons"],{"061b":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],style:"height:"+e.height},[s("iframe",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.src,frameborder:"no",scrolling:"auto"}})])},n=[],i={props:{src:{type:String,required:!0}},data:function(){return{height:document.documentElement.clientHeight-94.5+"px;",loading:!0,url:this.src}},mounted:function(){var e=this;setTimeout((function(){e.loading=!1}),300);var t=this;window.onresize=function(){t.height=document.documentElement.clientHeight-94.5+"px;"}}},r=i,o=s("2877"),l=Object(o["a"])(r,a,n,!1,null,null,null);t["a"]=l.exports},"0a41":function(e,t,s){"use strict";var a,n,i=s("22b7"),r=s("b63f"),o={colItem:function(e,t,s){var a=this,n=t.labelWidth?"".concat(t.labelWidth,"px"):null,o=this.$listeners.valChange,l=Object(r["a"])(t);return e("el-col",{style:"padding: 0px 7.5px 30px 7.5px"},[e("el-form-item",{attrs:{label:t.showLabel?t.label:"","label-width":n,prop:t.id,rules:l}},[e(i["a"],{key:t.id,attrs:{conf:t,value:s},on:{input:function(e){a.$set(t,"value",e),o(t.id,e)}}})])])}},l={name:"previewItem",components:{render:i["a"]},props:["model","value"],data:function(){return{eleConfig:this.model}},render:function(e){return o.colItem.call(this,e,this.eleConfig,this.value)}},c=l,u=(s("d52d"),s("2877")),d=Object(u["a"])(c,a,n,!1,null,"a1717d1e",null);t["a"]=d.exports},"0f1a":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return jsonClone})),__webpack_require__.d(__webpack_exports__,"a",(function(){return isAttr}));var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("4d63"),core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_regexp_dot_all_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("c607"),core_js_modules_es_regexp_dot_all_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_regexp_dot_all_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_regexp_sticky_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("2c3e"),core_js_modules_es_regexp_sticky_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_regexp_sticky_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("25f0"),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("5319"),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("14d9"),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("a15b"),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_regexp_test_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("00b4"),core_js_modules_es_regexp_test_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_regexp_test_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("e9c4"),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("b64b"),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_12__);function makeMap(e,t){for(var s=Object.create(null),a=e.split(","),n=0;n<a.length;n++)s[a[n]]=!0;return t?function(e){return s[e.toLowerCase()]}:function(e){return s[e]}}function indent(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(0===t)return e;var a,n=t<0,i=[],r="";if(n)t*=-1,a=new RegExp("(^\\s{0,".concat(t*s,"})"),"g");else for(var o=0;o<t*s;o++)r+=" ";return e.split("\n").forEach((function(e){e=n?e.replace(a,""):r+e,i.push(e)})),i.join("\n")}function titleCase(e){return e.replace(/( |^)[a-z]/g,(function(e){return e.toUpperCase()}))}function camelCase(e){return e.replace(/-[a-z]/g,(function(e){return e.substr(-1).toUpperCase()}))}function isNumberStr(e){return/^[+-]?(0|([1-9]\d*))(\.\d+)?$/g.test(e)}var beautifierConf={html:{indent_size:"2",indent_char:" ",max_preserve_newlines:"-1",preserve_newlines:!1,keep_array_indentation:!1,break_chained_methods:!1,indent_scripts:"separate",brace_style:"end-expand",space_before_conditional:!0,unescape_strings:!1,jslint_happy:!1,end_with_newline:!0,wrap_line_length:"110",indent_inner_html:!0,comma_first:!1,e4x:!0,indent_empty_lines:!0},js:{indent_size:"2",indent_char:" ",max_preserve_newlines:"-1",preserve_newlines:!1,keep_array_indentation:!1,break_chained_methods:!1,indent_scripts:"normal",brace_style:"end-expand",space_before_conditional:!0,unescape_strings:!1,jslint_happy:!0,end_with_newline:!0,wrap_line_length:"110",indent_inner_html:!0,comma_first:!1,e4x:!0,indent_empty_lines:!0}};function stringify(e){return JSON.stringify(e,(function(e,t){return"function"===typeof t?"".concat(t):t}))}function parse(str){return JSON.parse(str,(function(k,v){return null!==v&&v.indexOf&&v.indexOf("function")>-1?eval("(".concat(v,")")):v}))}function jsonClone(e){return parse(stringify(e))}function isLayout(e){return"row"===e.compType}function isTable(e){return"table"===e.compType}function inTable(e){return e.col&&e.row}var isAttr=makeMap("accept,accept-charset,accesskey,action,align,alt,async,autocomplete,autofocus,autoplay,autosave,bgcolor,border,buffered,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,http-equiv,name,contenteditable,contextmenu,controls,coords,data,datetime,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,method,for,form,formaction,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,ismap,itemprop,keytype,kind,label,lang,language,list,loop,low,manifest,max,maxlength,media,method,GET,POST,min,multiple,email,file,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,seamless,selected,shape,size,type,text,password,sizes,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,type,usemap,value,width,wrap")},"22b7":function(e,t,s){"use strict";s("b64b"),s("b0c0"),s("caad"),s("2532"),s("14d9"),s("e9c4"),s("4de4"),s("d3b7"),s("159b");var a=s("0f1a"),n=s("3c5a"),i=s("f655"),r=s("5f87"),o=s("5c96"),l=s("d0f3");function c(e,t){if(t.props.value=e.value,t.on.input=function(t){e.$emit("input",t)},"upload"===e.conf.compType){if(t.attrs["headers"]={Authorization:"Bearer "+Object(r["a"])()},console.log("dataObject.props.value",t.props.value),void 0!==t.props.value&&""!==t.props.value){var s=JSON.parse(t.props.value);t.props["file-list"]=s}t.attrs["before-upload"]=function(s){var a=s.name,n=a.split(".").pop();if(!e.conf.accept.includes(n))return e.$message.error("该后缀文件不允许上传"),!1;var i=s.size;return i>1024*t.props.fileSize*1024?(e.$message.error("文件大小超出限制，请检查！"),!1):void 0},t.attrs["on-success"]=function(s){if(500===s.code)return Object(o["Message"])({message:s.msg,type:"error"}),!1;console.log("on-success",s);var a=s.data.fileName.substring(s.data.fileName.lastIndexOf("/")+1),n=s.data.url,i=s.data.ossId,r={name:a,url:n,ossId:i},l=[];l=t.props.value?JSON.parse(t.props.value):[],l?l.push(r):l=[r],e.$emit("input",JSON.stringify(l))},t.attrs["on-remove"]=function(s,a){var n=JSON.parse(t.props.value),i=n.filter((function(e){return e.name!==s.name}));e.$emit("input",JSON.stringify(i))},t.attrs["on-error"]=function(e){console.log("on-error file",e)},t.attrs["on-preview"]=function(e){console.log("on-preview file==",e),l["a"].oss(e.ossId)}}}t["a"]={render:function(e){var t={attrs:{},props:{},on:{},style:{}};this.getRemoteData();var s=Object(a["b"])(this.conf),i=Object(n["default"])(e,s);return Object.keys(s).forEach((function(e){var n=s[e];t[e]?t[e]=n:"width"===e?t.style="width:"+n:Object(a["a"])(e)?"value"!==e&&(t.attrs[e]=n):t.props[e]=n})),c(this,t),e(s.ele,t,i)},props:["conf","value"],mixins:[i["a"]]}},"2ad6":function(e,t,s){"use strict";s("99af");var a,n,i=s("22b7"),r=s("b63f"),o={colItem:function(e,t,s,a){var n=this,o=this.$createElement,l=this.$listeners.valChange,c=[];if(e&&e.rules)return c=c.concat(Object(r["a"])(e)),o("el-form-item",{attrs:{label:"","label-width":"0px",prop:s.id+"."+a+"."+e.id,rules:c}},[o(i["a"],{key:e.id,attrs:{conf:e,value:t},on:{input:function(t){n.eleValue=t,l(n.eleParent.id,n.index,e.id,n.eleValue)}}}),e.required?o("span",{style:"color:#F56C6C"},["*"]):""])}},l={name:"fancyDynamicTableItem",components:{render:i["a"]},props:["model","value","parent","index"],mounted:function(){var e={};Object.assign(e,this.model),this.eleConfig=e},data:function(){return{eleConfig:{},eleParent:this.parent,eleValue:this.value}},render:function(){return o.colItem.call(this,this.eleConfig,this.eleValue,this.eleParent,this.index)},watch:{value:function(e){this.eleValue=e}}},c=l,u=s("2877"),d=Object(u["a"])(c,a,n,!1,null,null,null);t["a"]=d.exports},"2e71":function(e,t,s){"use strict";s.r(t);s("d3b7"),s("159b"),s("14d9");t["default"]={slot:function(e,t){var s=[],a=t.vertical?"display:block;":"";return t.options.forEach((function(n){"button"===t.optionType?s.push(e("el-checkbox-button",{attrs:{label:n.value}},[n.label])):s.push(e("el-checkbox",{attrs:{label:n.value,border:t.border},style:a},[n.label]))})),s}}},"38a4":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-col",[s("el-row",{attrs:{gutter:e.model.gutter}},[s("div",{staticClass:"drag-wrapper"},[e._t("default")],2)])],1)},n=[],i={name:"previewRowItem",components:{},props:["model","value"],data:function(){return{}},computed:{}},r=i,o=s("2877"),l=Object(o["a"])(r,a,n,!1,null,null,null);t["a"]=l.exports},"3c5a":function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return i}));s("d3b7"),s("159b"),s("ddb0"),s("ac1f"),s("5319"),s("b64b"),s("14d9");var a=s("9af6"),n={};function i(e,t){var s=[],a=n[t.ele];return a&&a.slot&&Object.keys(a).forEach((function(n){var i=a[n];s.push(i(e,t))})),s}a.keys().forEach((function(e){var t=e.replace("./","").replace(".js","");"index"!==t&&(n[t]=a(e).default)}))},4262:function(e,t,s){"use strict";s.r(t);s("14d9");t["default"]={slot:function(e,t){var s=[];return""!==t.prepend&&s.push(e("template",{slot:"prepend"},[t.prepend])),""!==t.append&&s.push(e("template",{slot:"append"},[t.append])),s}}},5142:function(e,t,s){"use strict";s("e5ba")},"59f6":function(e,t,s){"use strict";s.r(t);s("14d9");t["default"]={slot:function(e,t){var s=[];return"picture-card"===t["list-type"]?s.push(e("i",{class:"el-icon-plus"})):s.push(e("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-upload"}},[t.buttonText])),t.showTip&&s.push(e("div",{slot:"tip",class:"el-upload__tip"},[t.tips])),s}}},"651c":function(e,t,s){"use strict";s.r(t);var a=s("f585");t["default"]=a["default"]},"70da":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticStyle:{padding:"5px","margin-top":"10px"}},[s("table",{staticClass:"table-layout",style:e.tableWidth},[s("tbody",e._l(e.layoutArray,(function(t,a){return s("tr",{key:a,style:e.trHeight},e._l(t,(function(t,n){return s("fancy-edit-table-item",{key:n,attrs:{item:t,tdIndex:n,trIndex:a,tdStyle:e.tdStyle}},[e._t("default",null,{td:t})],2)})),1)})),0)])])])},n=[],i=(s("a9e3"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",{class:{cellHide:e.item.hide},style:{tdStyle:e.tdStyle,"background-color":e.item.style.background,width:e.item.style.width+"%"},attrs:{colspan:e.item.col,rowspan:e.item.row},on:{contextmenu:function(t){return t.preventDefault(),e.rightClick(t,e.trIndex,e.tdIndex)}}},[e._t("default",null,{td:e.item})],2)}),r=[],o={name:"fancyEditTableItem",components:{},props:{item:{type:Object,default:{}},tdIndex:{type:Number,default:0},trIndex:{type:Number,default:0},tdStyle:{type:String,default:""}}},l=o,c=(s("5142"),s("2877")),u=Object(c["a"])(l,i,r,!1,null,"6d7c6f2a",null),d=u.exports,_={name:"fancyEditTable",components:{fancyEditTableItem:d},props:{layoutArray:{type:Array,default:function(){return[]}},tdStyle:{type:String,default:""},width:{type:Number,default:100},height:{type:Number,default:100}},data:function(){return{}},mounted:function(){},destroyed:function(){},methods:{},computed:{tableWidth:function(){return"width:"+this.width+"%"},trHeight:function(){return"height:"+this.height+"px"}}},m=_,p=(s("89d2"),Object(c["a"])(m,a,n,!1,null,"6fd257be",null));t["a"]=p.exports},"7fe9":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"d",(function(){return c})),s.d(t,"a",(function(){return u})),s.d(t,"c",(function(){return d}));s("d3b7"),s("159b"),s("14d9"),s("b64b"),s("d81d"),s("e9c4"),s("a434");var a={};function n(){var e=this;a={};this.itemList.forEach((function(e){if("rowItem"===e.layout)i(e);else if("dynamicItem"===e.layout){var t=r(e),s=[];s.push(t),a[e.id]=s}else"tableItem"===e.layout?o(e):l(e)})),Object.keys(a).forEach((function(t){e.$set(e.form,t,a[t])}))}function i(e){var t=e.columns;t.forEach((function(e){e.list.forEach((function(e){if("dynamicItem"===e.layout){var t=r(e),s=[];s.push(t),a[e.id]=s}else l(e)}))}))}function r(e){var t=e.columns,s={};return t.forEach((function(e){var t=e.id;s[t]=e.value})),s}function o(e){e.layoutArray.map((function(e){e.map((function(e){e.columns.map((function(e){return l(e)}))}))}))}function l(e){a[e.id]=e.value}function c(e){var t=this;Object.keys(e).forEach((function(s){if("string"===typeof t.form[s]||"number"===typeof t.form[s])t.$set(t.form,s,e[s]);else if(t.form[s]instanceof Array&&e[s].length>0){var a=e[s][0];if("string"===typeof a||"number"===typeof a)t.$set(t.form,s,e[s]);else{var n=e[s];n.forEach((function(e,a){var n=JSON.parse(JSON.stringify(e));t.$set(t.form[s],a,n)}))}}}))}function u(e){var t=r(e);this.form[e.id].push(t)}function d(e,t){this.form[t.id].splice(e.$index,1)}},"83b6":function(e,t,s){"use strict";s.r(t);var a=s("f585");t["default"]=a["default"]},"89d2":function(e,t,s){"use strict";s("a76d")},9601:function(e,t,s){},a76d:function(e,t,s){},af6e:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{title:"审批驳回",visible:e.visible,"close-on-click-modal":!1,width:"600px","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.visible=t}}},[s("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"formData",attrs:{rules:e.rules,model:e.formData,"status-icon":""}},[s("el-form-item",{attrs:{label:"审批意见",prop:"message","label-width":"120px"}},[s("el-input",{attrs:{type:"textarea",maxlength:"300",placeholder:"请输入审批意见",autosize:{minRows:4},"show-word-limit":""},model:{value:e.formData.comment,callback:function(t){e.$set(e.formData,"comment",t)},expression:"formData.comment"}})],1),s("el-form-item",{attrs:{label:"驳回到",prop:"targetActivityId","label-width":"120px"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.targetActivityId,callback:function(t){e.$set(e.formData,"targetActivityId",t)},expression:"formData.targetActivityId"}},e._l(e.options,(function(e){return s("el-option",{key:e.nodeId,attrs:{value:e.nodeId,label:e.nodeName}})})),1)],1),s("el-form-item",{attrs:{align:"center"}},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.submitForm("formData")}}},[e._v("提交")]),s("el-button",{attrs:{size:"mini"},on:{click:function(t){e.visible=!1}}},[e._v("取消")])],1)],1)],1)},n=[],i=s("c7eb"),r=s("1da1"),o=(s("b0c0"),s("9a9d")),l={props:{taskId:String,backNodeList:Array,sendMessage:Object},data:function(){return{visible:!1,loading:!1,formData:{taskId:null,targetActivityId:null,comment:null,sendMessage:{}},rules:{targetActivityId:[{required:!0,message:"请选择驳回目标",trigger:"change"}]},options:[]}},watch:{visible:function(e){var t=this;return Object(r["a"])(Object(i["a"])().mark((function s(){return Object(i["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:e&&(t.options=[],t.formData.targetActivityId=t.backNodeList[0].nodeId,t.options=t.backNodeList);case 1:case"end":return s.stop()}}),s)})))()}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(s){var a;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!s){e.next=15;break}return t.loading=!0,e.prev=2,t.formData={taskId:t.taskId,targetActivityId:t.formData.targetActivityId,comment:t.formData.comment},t.formData.sendMessage={title:t.sendMessage.title,type:t.sendMessageType,messageContent:t.$store.state.user.name+"驳回了"+t.sendMessage.messageContent},e.next=7,o["a"].backProcess(t.formData);case 7:a=e.sent,200===a.code&&(t.$message.success("提交成功"),t.$refs["formData"].resetFields(),t.visible=!1,t.$emit("callBack")),t.loading=!1,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](2),t.loading=!1;case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}())}}},c=l,u=s("2877"),d=Object(u["a"])(c,a,n,!1,null,null,null);t["a"]=d.exports},b63f:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));s("14d9"),s("d3b7"),s("159b"),s("4d63"),s("c607"),s("ac1f"),s("2c3e"),s("25f0");function a(e){var t=[],s=["blur","change"];if(e.required&&t.push({required:!0,message:e.label+"不能为空",trigger:s}),e.rules&&e.rules.forEach((function(e){t.push({pattern:new RegExp(e.rule),message:e.msg,trigger:s})})),"undefined"!==typeof e.validateMaxText&&e.validateMaxText){var a={max:e.max,message:e.label+"超出最大字数限制",trigger:s};t.push(a)}return t}},bbce:function(e,t,s){"use strict";s("9601")},c81f:function(e,t,s){"use strict";s.r(t);s("d3b7"),s("159b"),s("14d9");t["default"]={slot:function(e,t){var s=[],a=t.vertical?"display:block;":"";return t.options.forEach((function(n){"button"===t.optionType?s.push(e("el-radio-button",{attrs:{label:n.value},style:""},[n.label])):s.push(e("el-radio",{attrs:{label:n.value,border:t.border},style:a},[n.label]))})),s}}},d52d:function(e,t,s){"use strict";s("f8fd")},d5cd:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.visible?s("div",[e.visible?s("el-dialog",{attrs:{title:"提交申请",visible:e.visible,width:"800px","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.visible=t},close:e.closeDialog}},[s("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"formData",attrs:{rules:e.rules,model:e.formData,"status-icon":""}},["waiting"===e.businessStatus.status?s("el-form-item",{attrs:{label:"审批意见",prop:"message","label-width":"120px"}},[s("el-input",{attrs:{type:"textarea",maxlength:"300",placeholder:"请输入审批意见",autosize:{minRows:4},"show-word-limit":""},model:{value:e.formData.message,callback:function(t){e.$set(e.formData,"message",t)},expression:"formData.message"}})],1):e._e(),e.nextNodes&&e.nextNodes.length>0?s("el-form-item",{attrs:{label:"下一步审批人",prop:"assigneeMap","label-width":"120px"}},e._l(e.nextNodes,(function(t,a){return s("div",{key:a},[s("span",[e._v("【"+e._s(t.nodeName)+"】：")]),s("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.formData.assigneeMap[t.nodeId],callback:function(s){e.$set(e.formData.assigneeMap,t.nodeId,s)},expression:"formData.assigneeMap[item.nodeId]"}}),s("el-input",{attrs:{placeholder:"请选择审批人",readonly:""},model:{value:e.nickName[t.nodeId],callback:function(s){e.$set(e.nickName,t.nodeId,s)},expression:"nickName[item.nodeId]"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(s){return e.choosePeople(t.chooseWay,t.assigneeId,t.nodeId)}},slot:"append"},[e._v("选择")])],1)],1)})),0):e._e(),e.setting.isCopy?s("el-form-item",{attrs:{label:"是否抄送",prop:"isCopy","label-width":"120px"}},[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-purple"},[s("el-radio-group",{attrs:{size:"small"},model:{value:e.formData.isCopy,callback:function(t){e.$set(e.formData,"isCopy",t)},expression:"formData.isCopy"}},[s("el-radio",{attrs:{label:!0,border:""}},[e._v("是")]),s("el-radio",{attrs:{label:!1,border:""}},[e._v("否")])],1)],1)]),e.formData.isCopy?s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-purple"},[s("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.formData.assigneeIds,callback:function(t){e.$set(e.formData,"assigneeIds",t)},expression:"formData.assigneeIds"}}),s("el-input",{staticClass:"input-with-select",attrs:{size:"small",readonly:"",placeholder:"请选择人员"},model:{value:e.formData.assigneeNames,callback:function(t){e.$set(e.formData,"assigneeNames",t)},expression:"formData.assigneeNames"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.chooseCopyUser},slot:"append"})],1)],1)]):e._e()],1):e._e(),s("el-form-item",{attrs:{align:"center"}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submitForm("formData")}}},[e._v("提交")]),e.backNodeList&&e.backNodeList.length>0?s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.openBack()}}},[e._v("退回")]):e._e(),e.isMultiInstance&&e.setting.addMultiInstance?s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.addMultiClick()}}},[e._v("加签")]):e._e(),e.multiList&&e.multiList.length>0&&e.setting.deleteMultiInstance?s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.deleteMultiClick()}}},[e._v("减签")]):e._e(),e.setting.isDelegate?s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.delegateClick()}}},[e._v("委托")]):e._e(),e.setting.isTransmit?s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.transmitClick()}}},[e._v("转办")]):e._e(),s("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closeDialog()}}},[e._v("取消")])],1)],1)],1):e._e(),s("chooseWorkflowUser",{ref:"wfUserRef",attrs:{dataObj:e.dataObj,nodeId:e.nodeId},on:{confirmUser:e.clickUser}}),s("sys-dept-user",{ref:"userCopyRef",attrs:{propUserList:e.copyUserList},on:{confirmUser:e.confirmCopyUser}}),s("el-dialog",{attrs:{"close-on-click-modal":!1,title:"委托申请",visible:e.delegateVisible,width:"700px","append-to-body":""},on:{"update:visible":function(t){e.delegateVisible=t}}},[s("el-form",{ref:"delegateData",attrs:{model:e.delegateForm,"status-icon":""}},[s("el-form-item",{attrs:{"label-width":"80px",label:"委托人",prop:"userName"}},[s("el-input",{attrs:{placeholder:"请选择委托人",readonly:""},model:{value:e.delegateForm.delegateUserName,callback:function(t){e.$set(e.delegateForm,"delegateUserName",t)},expression:"delegateForm.delegateUserName"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.delegatePeople()}},slot:"append"},[e._v("选择")])],1)],1),s("el-form-item",{attrs:{align:"center"}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.delegateSubmit()}}},[e._v("提交")]),s("el-button",{attrs:{size:"small"},on:{click:function(t){e.delegateVisible=!1}}},[e._v("取消")])],1)],1),s("sys-dept-user",{ref:"delegateUserRef",attrs:{propUserList:e.delegateUserList,multiple:!1},on:{confirmUser:e.confirmDelegateUser}})],1),s("el-dialog",{attrs:{"close-on-click-modal":!1,title:"转发申请",visible:e.transmitVisible,width:"700px","append-to-body":""},on:{"update:visible":function(t){e.transmitVisible=t}}},[s("el-form",{ref:"transmitData",attrs:{model:e.transmitForm,rules:e.transmitRules,"status-icon":""}},[s("el-form-item",{attrs:{"label-width":"80px",label:"审批意见"}},[s("el-input",{attrs:{type:"textarea",maxlength:"300",placeholder:"请输入审批意见",autosize:{minRows:4},"show-word-limit":""},model:{value:e.transmitForm.message,callback:function(t){e.$set(e.transmitForm,"message",t)},expression:"transmitForm.message"}})],1),s("el-form-item",{attrs:{"label-width":"80px",label:"转办人",prop:"userName"}},[s("el-input",{attrs:{placeholder:"请选择转办人",readonly:""},model:{value:e.transmitForm.userName,callback:function(t){e.$set(e.transmitForm,"userName",t)},expression:"transmitForm.userName"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.transmitPeople()}},slot:"append"},[e._v("选择")])],1)],1),s("el-form-item",{attrs:{align:"center"}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.transmitSubmit("transmitData")}}},[e._v("提交")]),s("el-button",{attrs:{size:"small"},on:{click:function(t){e.transmitVisible=!1}}},[e._v("取消")])],1)],1),s("sys-dept-user",{ref:"transmitUserRef",attrs:{propUserList:e.transmitUserList,multiple:!1},on:{confirmUser:e.confirmTransmitUser}})],1),s("el-dialog",{attrs:{"close-on-click-modal":!1,title:"加签",visible:e.addMultiVisible,width:"700px","append-to-body":""},on:{"update:visible":function(t){e.addMultiVisible=t}}},[s("el-form",{attrs:{model:e.addMultiForm,"status-icon":""}},[s("el-form-item",{attrs:{"label-width":"80px",label:"加签人",prop:"nickNames"}},[s("el-input",{attrs:{placeholder:"请选择加签人",readonly:""},model:{value:e.addMultiForm.nickNames,callback:function(t){e.$set(e.addMultiForm,"nickNames",t)},expression:"addMultiForm.nickNames"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.addMultiPeople()}},slot:"append"},[e._v("选择")])],1)],1),s("el-form-item",{attrs:{align:"center"}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.addMultiSubmit()}}},[e._v("提交")]),s("el-button",{attrs:{size:"small"},on:{click:function(t){e.addMultiVisible=!1}}},[e._v("取消")])],1)],1),s("multi-user",{ref:"addMultiUserRef",attrs:{taskId:e.taskId,propUserList:e.addMultiUserList},on:{confirmUser:e.confirmAddMultiUser}})],1),s("el-dialog",{attrs:{"close-on-click-modal":!1,title:"减签",visible:e.deleteMultiVisible,width:"700px","append-to-body":""},on:{"update:visible":function(t){e.deleteMultiVisible=t}}},[s("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.multiList},on:{"selection-change":e.handleSelectionMultiList}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),s("el-table-column",{attrs:{prop:"name",label:"任务名称",width:"200"}}),s("el-table-column",{attrs:{prop:"assignee",label:"办理人",width:"200"}}),s("el-table-column",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{prop:"assigneeId",label:"办理人ID",width:"200"}})],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.deleteMultiSubmit()}}},[e._v("确定")]),s("el-button",{attrs:{size:"small"},on:{click:function(t){e.deleteMultiVisible=!1}}},[e._v("取消")])],1)],1),s("back",{ref:"backRef",attrs:{taskId:e.taskId,backNodeList:e.backNodeList,sendMessage:e.sendMessage},on:{callBack:function(t){return e.callBack()}}})],1):e._e()},n=[],i=s("c7eb"),r=s("1da1"),o=(s("b0c0"),s("d81d"),s("a15b"),s("14d9"),s("9a9d")),l=s("194c"),c=s("15d4"),u=s("01e7"),d=s("af6e"),_={props:{taskId:String,taskVariables:Object,sendMessage:Object},components:{ChooseWorkflowUser:l["default"],SysDeptUser:c["default"],Back:d["a"],MultiUser:u["default"]},data:function(){return{visible:!1,loading:!1,transmitVisible:!1,delegateVisible:!1,addMultiVisible:!1,deleteMultiVisible:!1,formData:{message:null,assigneeMap:{},isCopy:!1,assigneeIds:void 0,assigneeNames:void 0,sendMessage:{}},transmitForm:{message:null,userId:null,userName:null,taskId:null,sendMessage:{}},delegateForm:{delegateUserId:null,delegateUserName:null,taskId:null,sendMessage:{}},isCopy:"2",nextNodes:[],rules:{assigneeMap:[{required:!0,message:"请输入下一步审批人",trigger:"blur"}]},transmitRules:{userName:[{required:!0,message:"请输入转办人",trigger:"blur"}]},nickName:{},dataObj:{},nodeId:void 0,delegateUserList:[],copyUserList:[],transmitUserList:[],addMultiUserList:[],isMultiInstance:!1,addMultiForm:{},deleteMultiForm:{},multiList:[],backNodeList:[],setting:{},businessStatus:{},sendMessageType:[1]}},watch:{visible:function(e){var t=this;return Object(r["a"])(Object(i["a"])().mark((function s(){var a,n,r;return Object(i["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!e){s.next=20;break}return s.prev=1,t.loading=!0,a={taskId:t.taskId,variables:t.taskVariables},s.next=6,o["a"].getNextNodeInfo(a);case 6:n=s.sent,r=n.data,t.nextNodes=r.list,t.isMultiInstance=r.isMultiInstance,t.multiList=r.multiList,t.backNodeList=r.backNodeList,t.setting=r.setting,t.businessStatus=r.businessStatus,t.loading=!1,s.next=20;break;case 17:s.prev=17,s.t0=s["catch"](1),t.loading=!1;case 20:case"end":return s.stop()}}),s,null,[[1,17]])})))()}},methods:{submitForm:function(e){var t=this;return Object(r["a"])(Object(i["a"])().mark((function s(){return Object(i["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.$refs[e].validate(function(){var s=Object(r["a"])(Object(i["a"])().mark((function s(a){var n;return Object(i["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!a){s.next=17;break}return t.loading=!0,s.prev=2,t.formData.variables=t.taskVariables,t.formData.taskId=t.taskId,t.formData.sendMessage={title:t.sendMessage.title,type:t.sendMessageType,messageContent:t.$store.state.user.name+"提交了"+t.sendMessage.messageContent},"draft"===t.businessStatus.status&&(t.formData.message="提交单据"),s.next=9,o["a"].completeTask(t.formData);case 9:n=s.sent,200===n.code&&(t.$message.success("办理成功"),t.$refs[e].resetFields(),t.visible=!1,t.$emit("submitCallback")),t.loading=!1,s.next=17;break;case 14:s.prev=14,s.t0=s["catch"](2),t.loading=!1;case 17:case"end":return s.stop()}}),s,null,[[2,14]])})));return function(e){return s.apply(this,arguments)}}());case 1:case"end":return s.stop()}}),s)})))()},closeDialog:function(){this.$refs["formData"].resetFields(),this.formData={message:null,assigneeMap:{},isCopy:!1},this.visible=!1},choosePeople:function(e,t,s){this.propUserList=[],e&&(this.formData.assigneeMap[s]?this.dataObj={chooseWay:e,assigneeId:t,ids:this.formData.assigneeMap[s].split(",")}:this.dataObj={chooseWay:e,assigneeId:t,ids:[]},this.nodeId=s,this.$refs.wfUserRef.visible=!0)},clickUser:function(e,t){var s=e.map((function(e){return e.userId})),a=e.map((function(e){return e.nickName})),n=s.join(","),i=a.join(",");this.formData.assigneeMap[t]=n,this.nickName[t]=i,this.$forceUpdate()},delegateSubmit:function(){var e=this;return Object(r["a"])(Object(i["a"])().mark((function t(){var s;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.delegateForm.taskId=e.taskId,e.delegateForm.sendMessage={title:e.sendMessage.title,type:e.sendMessageType,messageContent:e.$store.state.user.name+"委托了"+e.sendMessage.messageContent},t.next=4,o["a"].delegateTask(e.delegateForm);case 4:s=t.sent,200===s.code&&(e.$message.success("办理成功"),e.delegateForm={},e.visible=!1,e.$emit("submitCallback")),e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()},delegateClick:function(){this.delegateForm={},this.delegateVisible=!0},delegatePeople:function(){this.delegateUserList=[],this.delegateUserList.push(this.delegateForm.delegateUserId),this.$refs.delegateUserRef.visible=!0},confirmDelegateUser:function(e){this.delegateForm.delegateUserId=e[0].userId,this.delegateForm.delegateUserName=e[0].nickName,this.$forceUpdate(),this.$refs.delegateUserRef.visible=!1},chooseCopyUser:function(){this.copyUserList=[],this.copyUserList.push(this.formData.delegateUserId),this.$refs.userCopyRef.visible=!0},confirmCopyUser:function(e){var t=e.map((function(e){return e.userId})),s=e.map((function(e){return e.nickName}));this.formData.assigneeIds=t.join(","),this.formData.assigneeNames=s.join(","),this.$refs.userCopyRef.visible=!1},transmitClick:function(){this.transmitForm={},this.transmitVisible=!0},transmitSubmit:function(e){var t=this;this.transmitForm={transmitUserId:this.transmitForm.userId,taskId:this.taskId,comment:this.transmitForm.message},this.transmitForm.sendMessage={title:this.sendMessage.title,type:this.sendMessageType,messageContent:this.$store.state.user.name+"转发了"+this.sendMessage.messageContent},o["a"].transmitTask(this.transmitForm).then((function(s){200===s.code&&(t.$message.success("办理成功"),t.$refs[e].resetFields(),t.visible=!1,t.transmitVisible=!1,t.$emit("submitCallback")),t.loading=!1}))},transmitPeople:function(){this.transmitUserList=[],this.transmitUserList.push(this.transmitForm.userId),this.$refs.transmitUserRef.visible=!0},confirmTransmitUser:function(e){this.transmitForm.userId=e[0].userId,this.transmitForm.userName=e[0].nickName,this.$forceUpdate(),this.$refs.transmitUserRef.visible=!1},addMultiClick:function(){this.addMultiForm={},this.addMultiVisible=!0},addMultiPeople:function(){this.addMultiUserList=[],this.addMultiUserList=this.addMultiForm.assignees,this.$refs.addMultiUserRef.visible=!0},confirmAddMultiUser:function(e){var t=e.map((function(e){return e.userId})),s=e.map((function(e){return e.nickName}));this.addMultiForm={taskId:this.taskId,assignees:t,assigneeNames:s,nickNames:s.join(",")},this.$forceUpdate(),this.$refs.addMultiUserRef.visible=!1},addMultiSubmit:function(){var e=this;o["a"].addMultiInstanceExecution(this.addMultiForm).then((function(t){200===t.code&&(e.$message.success("办理成功"),e.addMultiForm={},e.visible=!1,e.addMultiVisible=!1,e.$emit("submitCallback"))}))},deleteMultiClick:function(){this.deleteMultiVisible=!0},handleSelectionMultiList:function(e){var t=e.map((function(e){return e.executionId})),s=e.map((function(e){return e.id})),a=e.map((function(e){return e.assigneeId})),n=e.map((function(e){return e.assignee}));this.deleteMultiForm={taskId:this.taskId,taskIds:s,executionIds:t,assigneeIds:a,assigneeNames:n}},deleteMultiSubmit:function(){var e=this;o["a"].deleteMultiInstanceExecution(this.deleteMultiForm).then((function(t){200===t.code&&(e.$message.success("办理成功"),e.visible=!1,e.deleteMultiVisible=!1,e.$emit("submitCallback"))}))},openBack:function(){this.$refs.backRef.visible=!0},callBack:function(){this.visible=!1,this.$emit("submitCallback")},reset:function(){this.isCopy=!1,this.delegate="2",this.transmitForm={},this.formData.message=null,this.formData.assigneeMap={},this.nickName={}}}},m=_,p=s("2877"),f=Object(p["a"])(m,a,n,!1,null,null,null);t["a"]=f.exports},e5ba:function(e,t,s){},ed55:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fancyDynamicTable"},[s("el-table",{ref:e.conf.id,staticStyle:{width:"100%"},attrs:{data:e.tableData,fit:!0,border:"",size:"mini","cell-style":{padding:"5px 0"},"header-cell-style":{background:"#F5F7FA"},"row-class-name":e.tableRowClassName,"show-summary":e.conf["show-summary"],"summary-method":e.sumTotal},on:{"selection-change":e.handlerSelectionChange}},[e.conf.multiCheck?s("el-table-column",{attrs:{align:"center",type:"selection",width:"35px",fixed:"left"}}):e._e(),e.conf.showIndex?s("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50px",fixed:"left"}}):e._e(),e._l(e.conf.columns,(function(t,a){return s("el-table-column",{key:a,attrs:{align:"center",prop:t.id,"min-width":"240px;"},scopedSlots:e._u([{key:"default",fn:function(s){return[e._t("item",null,{rowScope:s,item:t})]}}],null,!0)},[s("template",{slot:"header"},[e._v(" "+e._s(e.tableColumnLabels[a])+" ")])],2)})),e.conf.buttonDel?s("el-table-column",{attrs:{align:"center",label:"操作",width:"100px",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-form-item",{staticStyle:{margin:"10px 3px 15px 3px"},attrs:{"label-width":"0px"}},[s("i",{staticClass:"el-icon-delete optIcon",on:{click:function(s){return e.handlerDelete(t,e.conf)}}})])]}}],null,!1,3996797899)}):e._e()],2),s("div",{staticClass:"column-buttons"},[e.conf.buttonAdd?s("i",{staticClass:"el-icon-circle-plus-outline optIcon button-plus",on:{click:function(t){return e.handlerAdd(e.conf)}}}):e._e(),e.BachDeleteButtonShow(e.conf.id)?s("i",{staticClass:"el-icon-remove-outline optIcon button-plus ",on:{click:e.handlerBachDelete}}):e._e()])],1)},n=[],i=(s("d3b7"),s("159b"),s("14d9"),s("d81d"),s("a9e3"),s("13d5"),{name:"fancyDynamicTable",props:["data","conf"],data:function(){return{tableData:this.data,tableColumns:[],tableColumnLabels:[],multipleSelection:[],componentsMount:!1}},mounted:function(){var e=this;this.conf.columns.forEach((function(t){e.tableColumnLabels.push(t.label);var s={};Object.assign(s,t),e.tableColumns.push(s)})),this.componentsMount=!0},components:{},methods:{handlerAdd:function(e){this.$emit("addRow",e)},handlerDelete:function(e,t){this.$emit("deleteRow",e,t)},handlerBachDelete:function(){var e=this;this.$confirm("确认删除选中的数据?").then((function(){var t=[];e.multipleSelection.forEach((function(e){return t.push(e.index)})),e.$emit("batchDeleteRow",t,e.conf)}))},handlerSelectionChange:function(e){this.multipleSelection=e},tableRowClassName:function(e){e.row.index=e.rowIndex},sumTotal:function(e){var t=this,s=e.columns,a=e.data,n=[];return s.forEach((function(e,s){if(0!==s){var i=a.map((function(t){return Number(t[e.property])}));i.every((function(e){return isNaN(e)}))?n[s]="":(n[s]=i.reduce((function(e,t){var s=Number(t);return isNaN(s)?e:e+t}),0),n[s]+=" "+t.conf["summary-text"])}else n[s]=t.conf["sum-text"]})),n}},computed:{BachDeleteButtonShow:function(){return function(e){if(this.componentsMount)return this.conf.multiCheck&&this.$refs[e].selection.length>0}}}}),r=i,o=(s("bbce"),s("2877")),l=Object(o["a"])(r,a,n,!1,null,"740d974e",null);t["a"]=l.exports},f133:function(e,t,s){"use strict";s.r(t);s("d3b7"),s("159b"),s("14d9");t["default"]={slot:function(e,t){var s=[];return t.options.forEach((function(t){s.push(e("el-option",{attrs:{label:t.label,value:t.value,disabled:t.disabled}}))})),s}}},f585:function(e,t,s){"use strict";s.r(t),t["default"]={slot:function(e,t){return t.text}}},f655:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));s("99af"),s("caad"),s("2532");var a={methods:{getRemoteData:function(){var e=this;"dynamic"===this.conf.dataType&&this.$axios.get(this.conf.action).then((function(t){0===e.conf.options.length&&(e.conf.options=e.conf.options.concat(t.data))}))}}}},f8fd:function(e,t,s){}}]);