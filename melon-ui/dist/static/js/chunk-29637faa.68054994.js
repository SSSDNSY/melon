(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29637faa","chunk-0943e009","chunk-d0f39e38","chunk-2bfe0e02","chunk-70b11dba"],{"15d4":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.visible?s("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"用户",visible:e.visible,width:"60%","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t}}},[s("div",{staticClass:"app-container"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:4,xs:24}},[s("div",{staticClass:"head-container"},[s("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"请输入部门名称",clearable:"",size:"mini","prefix-icon":"el-icon-search"},model:{value:e.deptName,callback:function(t){e.deptName=t},expression:"deptName"}})],1),s("div",{staticClass:"head-container"},[s("el-tree",{ref:"tree",attrs:{data:e.deptOptions,props:e.defaultProps,"expand-on-click-node":!1,"filter-node-method":e.filterNode,"default-expand-all":""},on:{"node-click":e.handleNodeClick}})],1)]),s("el-col",{attrs:{span:20,xs:24}},[s("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,size:"mini","label-width":"68px"}},[s("el-form-item",{attrs:{label:"用户名称",prop:"userName"}},[s("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入用户名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.userName,callback:function(t){e.$set(e.queryParams,"userName",t)},expression:"queryParams.userName"}})],1),s("el-form-item",{attrs:{label:"手机号码",prop:"phonenumber"}},[s("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入手机号码",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.phonenumber,callback:function(t){e.$set(e.queryParams,"phonenumber",t)},expression:"queryParams.phonenumber"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),s("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),s("el-row",{staticClass:"mb8",attrs:{gutter:10}},[s("right-toolbar",{attrs:{showSearch:e.showSearch,columns:e.columns},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",attrs:{data:e.userList,"row-key":e.getRowKey},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection","reserve-selection":!0,width:"50",align:"center"}}),e.columns[0].visible?s("el-table-column",{key:"userId",attrs:{label:"用户编号",align:"center",prop:"userId"}}):e._e(),e.columns[1].visible?s("el-table-column",{key:"userName",attrs:{label:"用户名称",align:"center",prop:"userName","show-overflow-tooltip":!0}}):e._e(),e.columns[2].visible?s("el-table-column",{key:"nickName",attrs:{label:"用户昵称",align:"center",prop:"nickName","show-overflow-tooltip":!0}}):e._e(),e.columns[3].visible?s("el-table-column",{key:"deptName",attrs:{label:"部门",align:"center",prop:"dept.deptName","show-overflow-tooltip":!0}}):e._e(),e.columns[4].visible?s("el-table-column",{key:"phonenumber",attrs:{label:"手机号码",align:"center",prop:"phonenumber",width:"120"}}):e._e(),e.columns[5].visible?s("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(e.parseTime(t.row.createTime)))])]}}],null,!1,3078210614)}):e._e()],1),s("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)],1)],1),s("div",e._l(e.chooseUserList,(function(t){return s("el-tag",{key:t.userId,staticStyle:{margin:"2px"},attrs:{closable:""},on:{close:function(s){return e.handleCloseTag(t)}}},[e._v(e._s(t.userName)+" ")])})),1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmUser}},[e._v("确认")]),s("el-button",{attrs:{size:"small"},on:{click:function(t){e.visible=!1}}},[e._v("取 消")])],1)]):e._e()},r=[],o=(s("4de4"),s("d3b7"),s("159b"),s("c740"),s("a434"),s("4cd5")),a=s("c0c7"),n={props:{multiple:{type:Boolean,default:!0},propUserList:{type:Array,default:function(){return[]}}},name:"User",dicts:["sys_user_sex"],data:function(){return{loading:!0,visible:!1,showSearch:!0,total:0,userList:[],deptOptions:[],open:!1,deptName:void 0,defaultProps:{children:"children",label:"label"},queryParams:{pageNum:1,pageSize:10,userName:void 0,phonenumber:void 0,deptId:void 0,type:"person",ids:[]},columns:[{key:0,label:"用户编号",visible:!0},{key:1,label:"用户名称",visible:!0},{key:2,label:"用户昵称",visible:!0},{key:3,label:"部门",visible:!0},{key:4,label:"手机号码",visible:!0},{key:5,label:"创建时间",visible:!0}],getRowKey:function(e){return e.userId},chooseUserList:[],flag:!1}},watch:{deptName:function(e){this.$refs.tree.filter(e)},propUserList:function(e){e.length>0?(this.queryParams.ids=e,this.getList(),this.flag=!0):this.chooseUserList=[]}},created:function(){this.getList(),this.getTreeselect()},methods:{getList:function(){var e=this;this.loading=!0,Object(o["b"])(this.queryParams).then((function(t){var s=t.data.page;e.userList=s.rows,e.total=s.total,e.flag&&t.data.list&&(e.chooseUserList=t.data.list,t.data.list.forEach((function(t){e.$refs.multipleTable.toggleRowSelection(t,!0)}))),e.loading=!1}))},getTreeselect:function(){var e=this;Object(a["d"])().then((function(t){e.deptOptions=t.data}))},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handleNodeClick:function(e){this.queryParams.deptId=e.id,this.getList()},cancel:function(){this.open=!1,this.reset()},handleQuery:function(){this.flag=!1,this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.queryParams.deptId="",this.queryParams.phonenumber="",this.queryParams.userName="",this.handleQuery()},handleSelectionChange:function(e){if(this.multiple)this.chooseUserList=e.filter((function(e,t,s){return s.findIndex((function(t){return t.userId===e.userId}))===t}));else{if(this.chooseUserList=e,e.length>1){var t=e.shift();this.$refs.multipleTable.toggleRowSelection(t,!1)}0===e.length&&(this.chooseUserList=null)}},handleCloseTag:function(e){var t=this;this.chooseUserList.splice(this.chooseUserList.indexOf(e),1),this.$refs.multipleTable.toggleRowSelection(e,!1),this.userList.forEach((function(s,i){e.userId===s.userId&&t.$refs.multipleTable.toggleRowSelection(t.userList[i],!1)}))},confirmUser:function(){this.chooseUserList.length>0?this.$emit("confirmUser",this.chooseUserList):this.$modal.msgWarning("请选择人员！")}}},l=n,c=s("2877"),u=Object(c["a"])(l,i,r,!1,null,null,null);t["default"]=u.exports},"161a":function(e,t,s){},"4cd5":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var i=s("b775");function r(e){return Object(i["a"])({url:"/workflow/user/getWorkflowUserListByPage",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/workflow/user/getWorkflowAddMultiListByPage",method:"post",data:e})}},"4e23":function(e,t,s){"use strict";s.d(t,"d",(function(){return r})),s.d(t,"c",(function(){return o})),s.d(t,"a",(function(){return a})),s.d(t,"e",(function(){return n})),s.d(t,"b",(function(){return l}));var i=s("b775");function r(e){return Object(i["a"])({url:"/workflow/businessRule/list",method:"get",params:e})}function o(e){return Object(i["a"])({url:"/workflow/businessRule/"+e,method:"get"})}function a(e){return Object(i["a"])({url:"/workflow/businessRule",method:"post",data:e})}function n(e){return Object(i["a"])({url:"/workflow/businessRule",method:"put",data:e})}function l(e){return Object(i["a"])({url:"/workflow/businessRule/"+e,method:"delete"})}},"888e":function(e,t,s){"use strict";s("161a")},b180:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.visible?s("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"角色",visible:e.visible,width:"60%","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t}}},[s("div",{staticClass:"app-container"},[s("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0}},[s("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[s("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入角色名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.roleName,callback:function(t){e.$set(e.queryParams,"roleName",t)},expression:"queryParams.roleName"}})],1),s("el-form-item",{attrs:{label:"权限字符",prop:"roleKey"}},[s("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入权限字符",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.roleKey,callback:function(t){e.$set(e.queryParams,"roleKey",t)},expression:"queryParams.roleKey"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),s("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),s("el-row",{staticClass:"mb8",attrs:{gutter:10}},[s("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",attrs:{data:e.roleList,"row-key":e.getRowKey},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection","reserve-selection":!0,width:"55",align:"center"}}),s("el-table-column",{attrs:{label:"角色编号",prop:"roleId",width:"120"}}),s("el-table-column",{attrs:{label:"角色名称",prop:"roleName","show-overflow-tooltip":!0,width:"150"}}),s("el-table-column",{attrs:{label:"权限字符",prop:"roleKey","show-overflow-tooltip":!0,width:"150"}}),s("el-table-column",{attrs:{label:"显示顺序",prop:"roleSort",width:"100"}}),s("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(e.parseTime(t.row.createTime)))])]}}],null,!1,3078210614)})],1),s("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),s("div",e._l(e.chooseRoleList,(function(t){return s("el-tag",{key:t.roleId,staticStyle:{margin:"2px"},attrs:{closable:""},on:{close:function(s){return e.handleCloseTag(t)}}},[e._v(e._s(t.roleName)+" ")])})),1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmUser}},[e._v("确认")]),s("el-button",{attrs:{size:"small"},on:{click:function(t){e.visible=!1}}},[e._v("取 消")])],1)]):e._e()},r=[],o=(s("d3b7"),s("159b"),s("4de4"),s("c740"),s("a434"),s("4cd5")),a={name:"Role",props:{propRoleList:{type:Array,default:function(){return[]}}},data:function(){return{visible:!1,loading:!0,exportLoading:!1,ids:[],multiple:!0,showSearch:!0,total:0,roleList:[],title:"",open:!1,dateRange:[],queryParams:{pageNum:1,pageSize:10,roleName:void 0,roleKey:void 0,type:"role",ids:[]},getRowKey:function(e){return e.roleId},chooseRoleList:[],flag:!1}},watch:{propRoleList:function(e){e.length>0?(this.queryParams.ids=e,this.flag=!0,this.getList()):this.chooseRoleList=[]}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,Object(o["b"])(this.queryParams).then((function(t){var s=t.data.page;e.roleList=s.rows,e.total=s.total,e.flag&&t.data.list&&(e.chooseRoleList=t.data.list,t.data.list.forEach((function(t){e.$refs.multipleTable.toggleRowSelection(t,!0)}))),e.loading=!1}))},handleQuery:function(){this.flag=!1,this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.dateRange=[],this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){if(this.multiple)this.chooseRoleList=e.filter((function(e,t,s){return s.findIndex((function(t){return t.roleId===e.roleId}))===t}));else{if(this.chooseRoleList=e,e.length>1){var t=e.shift();this.$refs.multipleTable.toggleRowSelection(t,!1)}0===e.length&&(this.chooseRoleList=null)}},handleCloseTag:function(e){var t=this;this.chooseRoleList.splice(this.chooseRoleList.indexOf(e),1),this.$refs.multipleTable.toggleRowSelection(e,!1),this.roleList.forEach((function(s,i){e.roleId===s.roleId&&t.$refs.multipleTable.toggleRowSelection(t.roleList[i],!1)}))},confirmUser:function(){this.chooseRoleList.length>0?this.$emit("confirmUser",this.chooseRoleList):this.$modal.msgWarning("请选择角色！")}}},n=a,l=s("2877"),c=Object(l["a"])(n,i,r,!1,null,null,null);t["default"]=c.exports},b2e1:function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"c",(function(){return o})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return n}));s("99af");var i=s("b775");function r(e){return Object(i["a"])({url:"/workflow/actNodeAssignee",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/workflow/actNodeAssignee/"+e,method:"delete"})}function a(e,t){return Object(i["a"])({url:"/workflow/actNodeAssignee/".concat(e,"/").concat(t),method:"get"})}function n(e,t){return Object(i["a"])({url:"/workflow/actNodeAssignee/copy/".concat(e,"/").concat(t),method:"post"})}},c0c7:function(e,t,s){"use strict";s.d(t,"h",(function(){return o})),s.d(t,"f",(function(){return a})),s.d(t,"a",(function(){return n})),s.d(t,"k",(function(){return l})),s.d(t,"c",(function(){return c})),s.d(t,"i",(function(){return u})),s.d(t,"b",(function(){return d})),s.d(t,"g",(function(){return m})),s.d(t,"l",(function(){return p})),s.d(t,"m",(function(){return f})),s.d(t,"n",(function(){return h})),s.d(t,"e",(function(){return b})),s.d(t,"j",(function(){return g})),s.d(t,"d",(function(){return v}));var i=s("b775"),r=s("c38a");function o(e){return Object(i["a"])({url:"/system/user/list",method:"get",params:e})}function a(e){return Object(i["a"])({url:"/system/user/"+Object(r["e"])(e),method:"get"})}function n(e){return Object(i["a"])({url:"/system/user",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/system/user",method:"put",data:e})}function c(e){return Object(i["a"])({url:"/system/user/"+e,method:"delete"})}function u(e,t){var s={userId:e,password:t};return Object(i["a"])({url:"/system/user/resetPwd",method:"put",data:s})}function d(e,t){var s={userId:e,status:t};return Object(i["a"])({url:"/system/user/changeStatus",method:"put",data:s})}function m(){return Object(i["a"])({url:"/system/user/profile",method:"get"})}function p(e){return Object(i["a"])({url:"/system/user/profile",method:"put",data:e})}function f(e,t){var s={oldPassword:e,newPassword:t};return Object(i["a"])({url:"/system/user/profile/updatePwd",method:"put",params:s})}function h(e){return Object(i["a"])({url:"/system/user/profile/avatar",method:"post",data:e})}function b(e){return Object(i["a"])({url:"/system/user/authRole/"+e,method:"get"})}function g(e){return Object(i["a"])({url:"/system/user/authRole",method:"put",params:e})}function v(){return Object(i["a"])({url:"/system/user/deptTree",method:"get"})}},db18:function(e,t,s){"use strict";s.d(t,"e",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"g",(function(){return a})),s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return l})),s.d(t,"f",(function(){return c})),s.d(t,"c",(function(){return u}));s("99af");var i=s("b775");function r(e){return Object(i["a"])({url:"/workflow/definition/list",method:"get",params:e})}function o(e){return Object(i["a"])({url:"/workflow/definition/hisList",method:"get",params:e})}function a(e){return Object(i["a"])({url:"/workflow/definition/updateProcDefState",method:"put",data:e})}function n(e,t){return Object(i["a"])({url:"/workflow/definition/".concat(e,"/").concat(t),method:"delete"})}function l(e){return Object(i["a"])({url:"/workflow/definition/deployByFile",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/workflow/definition/setting/"+e,method:"get"})}function u(e){return Object(i["a"])({url:"/workflow/definition/getXml/"+e,method:"get"})}},ec07:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.visible?s("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"用户",visible:e.visible,width:"60%","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t}}},[s("div",{staticClass:"app-container"},[s("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),s("el-tree",{ref:"tree",attrs:{data:e.deptList,"show-checkbox":"","node-key":"deptId",accordion:"","default-expand-all":"","filter-node-method":e.filterNode,props:e.defaultProps,"check-strictly":e.isLinked}})],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmUser}},[e._v("确认")]),s("el-button",{attrs:{size:"small"},on:{click:function(t){e.visible=!1}}},[e._v("取 消")])],1)]):e._e()},r=[],o=(s("d3b7"),s("159b"),s("14d9"),s("4de4"),s("4cd5")),a=s("ca17"),n=s.n(a),l=(s("542c"),{name:"Dept",dicts:["sys_normal_disable"],components:{Treeselect:n.a},props:{propDeptList:{type:Array,default:function(){return[]}},isLinked:{type:Boolean,default:!1}},data:function(){return{defaultProps:{children:"children",label:"deptName"},loading:!0,visible:!1,filterText:null,deptList:[],deptIds:[],queryParams:{type:"dept"}}},watch:{propDeptList:function(e){var t=this;e.length>0?(this.deptIds=[],this.getList(),e.forEach((function(e){t.deptIds.push(e)}))):(this.deptIds=[],this.getList())},filterText:function(e){this.$refs.tree.filter(e)}},methods:{filterNode:function(e,t){return!e||-1!==t.deptName.indexOf(e)},getList:function(){var e=this;this.loading=!0,Object(o["b"])(this.queryParams).then((function(t){e.deptList=e.handleTree(t.data.list,"deptId"),e.loading=!1,e.$nextTick((function(){e.deptIds.length>0&&e.$refs.tree.setCheckedKeys(e.deptIds)}))}))},confirmUser:function(){var e=this.$refs.tree.getCheckedNodes();e.length>0?this.$emit("confirmUser",e):this.$modal.msgWarning("请选择部门！")}}}),c=l,u=s("2877"),d=Object(u["a"])(c,i,r,!1,null,null,null);t["default"]=d.exports},f322:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.visible?s("el-dialog",{attrs:{title:"设置",visible:e.visible,width:"70%","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"container"},[s("el-tabs",{staticClass:"tabs",attrs:{"tab-position":e.tabPosition},on:{"tab-click":e.changeSteps},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.nodeList,(function(t,i){return s("el-tab-pane",{key:i,attrs:{name:t.id,label:t.nodeName}},[s("el-form",{ref:"form",refInFor:!0,staticStyle:{height:"inherit"},attrs:{size:"small","label-position":"left",model:e.form}},[s("el-form-item",{attrs:{label:"环节名称"}},[e.nodeName?s("el-tag",[e._v(e._s(e.nodeName))]):s("el-tag",[e._v("无")])],1),s("el-row",[s("el-form-item",[s("el-col",{staticStyle:{"line-height":"20px"},attrs:{span:24}},[s("el-alert",{attrs:{title:"每个节点设置，如有修改都请保存一次，跳转节点后数据不会自动保存！",type:"warning","show-icon":"",closable:!1}})],1)],1)],1),1===t.index?s("el-form-item",{attrs:{prop:"chooseWay",label:"选人方式"}},[s("el-radio-group",{on:{change:function(t){return e.clearSelect(e.form.chooseWay)}},model:{value:e.form.chooseWay,callback:function(t){e.$set(e.form,"chooseWay",t)},expression:"form.chooseWay"}},[s("el-radio",{attrs:{border:"",label:"person"}},[e._v("选择人员")]),s("el-radio",{attrs:{border:"",label:"role"}},[e._v("选择角色")]),s("el-radio",{attrs:{border:"",label:"dept"}},[e._v("选择部门")]),s("el-radio",{attrs:{border:"",label:"rule"}},[e._v("业务规则")])],1)],1):e._e(),1===t.index?s("el-row",[s("el-col",{staticClass:"line",attrs:{span:8}},[s("el-form-item",{attrs:{label:"是否弹窗选人",prop:"isShow"}},[s("el-switch",{model:{value:e.form.isShow,callback:function(t){e.$set(e.form,"isShow",t)},expression:"form.isShow"}})],1)],1),s("el-col",{staticClass:"line",attrs:{span:8}},[s("el-form-item",{attrs:{label:"是否能会签",prop:"multiple"}},[s("el-switch",{attrs:{disabled:""},model:{value:e.form.multiple,callback:function(t){e.$set(e.form,"multiple",t)},expression:"form.multiple"}})],1)],1),s("el-col",{staticClass:"line",attrs:{span:8}},[s("el-form-item",{attrs:{label:"是否能退回",prop:"isBack"}},[s("el-switch",{model:{value:e.form.isBack,callback:function(t){e.$set(e.form,"isBack",t)},expression:"form.isBack"}})],1)],1)],1):e._e(),s("el-row",[s("el-col",{staticClass:"line",attrs:{span:8}},[s("el-form-item",{attrs:{label:"是否可以委托",prop:"isDelegate"}},[s("el-switch",{model:{value:e.form.isDelegate,callback:function(t){e.$set(e.form,"isDelegate",t)},expression:"form.isDelegate"}})],1)],1),s("el-col",{staticClass:"line",attrs:{span:8}},[s("el-form-item",{attrs:{label:"是否能转办",prop:"isTransmit"}},[s("el-switch",{model:{value:e.form.isTransmit,callback:function(t){e.$set(e.form,"isTransmit",t)},expression:"form.isTransmit"}})],1)],1),s("el-col",{staticClass:"line",attrs:{span:8}},[s("el-form-item",{attrs:{label:"是否能抄送",prop:"isCopy"}},[s("el-switch",{model:{value:e.form.isCopy,callback:function(t){e.$set(e.form,"isCopy",t)},expression:"form.isCopy"}})],1)],1)],1),1===t.index?s("el-row",[s("el-col",{staticClass:"line",attrs:{span:8}},[s("el-form-item",{attrs:{label:"是否自动审批",prop:"autoComplete"}},[s("el-switch",{model:{value:e.form.autoComplete,callback:function(t){e.$set(e.form,"autoComplete",t)},expression:"form.autoComplete"}}),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"当前节点与上一节点审批人相同自动审批，下一节点如果为弹窗选人则默认下一节点全部人员为候选人",placement:"top-start"}},[s("i",{staticClass:"el-icon-info",staticStyle:{cursor:"pointer","font-size":"15px","line-height":"15px","vertical-align":"middle","padding-left":"10px"}})])],1)],1)],1):e._e(),e.form.multiple?s("el-row",[s("el-col",{staticClass:"line",attrs:{span:8}},[s("el-form-item",{attrs:{"label-width":"100px",label:"会签集合",prop:"multipleColumn"}},[s("el-tag",[e._v(e._s(e.form.multipleColumn))])],1)],1),s("el-col",{staticClass:"line",attrs:{span:8}},[s("el-form-item",{attrs:{label:"是否能加签",prop:"addMultiInstance"}},[s("el-switch",{model:{value:e.form.addMultiInstance,callback:function(t){e.$set(e.form,"addMultiInstance",t)},expression:"form.addMultiInstance"}})],1)],1),s("el-col",{staticClass:"line",attrs:{span:8}},[s("el-form-item",{attrs:{label:"是否能减签",prop:"deleteMultiInstance"}},[s("el-switch",{model:{value:e.form.deleteMultiInstance,callback:function(t){e.$set(e.form,"deleteMultiInstance",t)},expression:"form.deleteMultiInstance"}})],1)],1)],1):e._e(),s("el-row",[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{"label-width":"100px",label:"节点任务",prop:"task"}},[s("el-popover",{attrs:{placement:"right",width:"500",trigger:"click"}},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addListener}},[e._v("添加")]),s("el-link",{staticStyle:{"padding-left":"15px"},attrs:{type:"info",underline:!1}},[e._v("说明：当前任务节点完成前或完成后执行")]),s("el-table",{attrs:{data:e.form.taskListenerList}},[s("el-table-column",{attrs:{label:"事件类型",width:"150",align:"center",prop:"paramType"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.eventType,callback:function(s){e.$set(t.row,"eventType",s)},expression:"scope.row.eventType"}},e._l(e.options,(function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}],null,!0)}),s("el-table-column",{attrs:{label:"bean名称",align:"center",prop:"paramType"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{model:{value:t.row.beanName,callback:function(s){e.$set(t.row,"beanName",s)},expression:"scope.row.beanName"}})]}}],null,!0)}),s("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(s){return e.deleteListener(t.$index)}}},[e._v("删除")])]}}],null,!0)})],1),s("el-badge",{staticClass:"item",attrs:{slot:"reference",value:e.form.taskListenerList.length},slot:"reference"},[s("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"}},[e._v("节点任务")])],1)],1)],1)],1)],1),1===t.index?s("el-row",[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{"label-width":"100px",label:"审批人员",prop:"assignee"}},[s("el-input",{attrs:{readonly:"",placeholder:"审批人员"},model:{value:e.form.assignee,callback:function(t){e.$set(e.form,"assignee",t)},expression:"form.assignee"}},[s("el-button",{attrs:{slot:"append",type:"primary"},domProps:{textContent:e._s(e.btnText)},on:{click:e.openSelect},slot:"append"}),s("el-button",{attrs:{slot:"append",type:"success"},on:{click:e.clearSelect},slot:"append"},[e._v("清空")])],1),s("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{placeholder:"审批人员ID"},model:{value:e.form.assigneeId,callback:function(t){e.$set(e.form,"assigneeId",t)},expression:"form.assigneeId"}})],1)],1)],1):e._e()],1)],1)})),1),s("div",{staticStyle:{float:"right",position:"relative",bottom:"20px"}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.onSubmit}},[e._v("保存")]),1===e.index?s("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.del}},[e._v("重置")]):e._e()],1)],1),s("sys-dept-user",{ref:"userRef",attrs:{propUserList:e.propUserList},on:{confirmUser:e.clickUser}}),s("sys-role",{ref:"roleRef",attrs:{propRoleList:e.propRoleList},on:{confirmUser:e.clickRole}}),s("sys-dept",{ref:"deptRef",attrs:{propDeptList:e.propDeptList},on:{confirmUser:e.clickDept}}),s("process-Rule",{ref:"processRuleRef",attrs:{propDeptList:e.propDeptList},on:{primary:e.clickRule}})],1):e._e()},r=[],o=s("c7eb"),a=s("1da1"),n=(s("14d9"),s("a434"),s("d81d"),s("a15b"),s("15d4")),l=s("b180"),c=s("ec07"),u=s("ffde"),d=s("db18"),m=s("b2e1"),p={components:{SysDeptUser:n["default"],SysRole:l["default"],SysDept:c["default"],ProcessRule:u["default"]},data:function(){return{tabPosition:"left",activeName:"",loading:!1,nodeList:[],visible:!1,active:null,form:{isShow:!0,isBack:!1,multiple:!1,chooseWay:void 0,isDelegate:!1,isTransmit:!1,isCopy:!1,autoComplete:!1,addMultiInstance:!1,deleteMultiInstance:!1,taskListenerList:[]},btnText:"选择人员",definitionId:null,nodeName:null,index:0,propUserList:[],propRoleList:[],propDeptList:[],options:[{value:"before",label:"完成前"},{value:"after",label:"完成后"}]}},methods:{init:function(e){var t=this;return Object(a["a"])(Object(o["a"])().mark((function s(){var i;return Object(o["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.loading=!0,t.definitionId=e,t.form.chooseWay="person",s.next=5,Object(d["f"])(e);case 5:i=s.sent,t.nodeList=i.data,t.activeName="0",t.changeSteps();case 9:case"end":return s.stop()}}),s)})))()},changeSteps:function(){var e=this;this.nodeList[this.activeName],this.form.assignee=void 0,this.form.multipleColumn=void 0,this.form.multiple=!1,this.loading=!0,this.nodeName=this.nodeList[this.activeName].nodeName,this.index=this.nodeList[this.activeName].index,Object(m["d"])(this.definitionId,this.nodeList[this.activeName].nodeId).then((function(t){200===t.code&&(e.form=t.data,e.form.nodeName=t.data.nodeName,e.loading=!1,void 0===e.form.id&&(e.form.isBack=!1),"person"===e.form.chooseWay?e.btnText="选择人员":"role"===e.form.chooseWay?e.btnText="选择角色":"dept"===e.form.chooseWay?e.btnText="选择部门":"rule"===e.form.chooseWay&&(e.btnText="选择规则"),e.$forceUpdate())}))},onSubmit:function(){var e=this;this.nodeName?(this.form.nodeName=this.nodeName,this.form.index=this.index,Object(m["a"])(this.form).then((function(t){e.form=t.data,e.$modal.msgSuccess("保存成功")}))):this.$modal.msgError("请选择节点")},del:function(){var e=this;this.form.id?Object(m["c"])(this.form.id).then((function(t){200===t.code&&(e.$modal.msgSuccess("重置成功"),e.reset())})):(this.$modal.msgSuccess("重置成功"),this.reset())},reset:function(){this.form.assigneeId=void 0,this.form.assignee=void 0,this.form.chooseWay="person",this.form.processDefinitionId=this.definitionId},addListener:function(){var e={eventType:"",beanName:""};this.form.taskListenerList.push(e)},deleteListener:function(e){this.form.taskListenerList.splice(e,1)},clearSelect:function(e){this.form.assigneeId="",this.form.assignee="","person"===e?this.btnText="选择人员":"role"===e?this.btnText="选择角色":"dept"===e?this.btnText="选择部门":"rule"===e&&(this.btnText="选择规则")},openSelect:function(){var e=this;return Object(a["a"])(Object(o["a"])().mark((function t(){var s,i,r;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:"person"===e.form.chooseWay?(e.propUserList=[],e.form.assigneeId&&(s=e.form.assigneeId.split(","),s.length>0&&(e.propUserList=s)),e.$refs.userRef.visible=!0):"role"===e.form.chooseWay?(e.propRoleList=[],e.form.assigneeId&&(i=e.form.assigneeId.split(","),i.length>0&&(e.propRoleList=i)),e.$refs.roleRef.visible=!0):"dept"===e.form.chooseWay?(e.propDeptList=[],e.form.assigneeId&&(r=e.form.assigneeId.split(","),r.length>0&&(e.propDeptList=r)),e.$refs.deptRef.visible=!0):"rule"===e.form.chooseWay&&(e.$refs.processRuleRef.visible=!0);case 1:case"end":return t.stop()}}),t)})))()},clickUser:function(e){var t=e.map((function(e){return e.nickName})),s=e.map((function(e){return e.userId})),i=t.join(","),r=s.join(",");this.$set(this.form,"assignee",i),this.$set(this.form,"assigneeId",r),this.$refs.userRef.visible=!1,this.$forceUpdate()},clickRole:function(e){var t=e.map((function(e){return e.roleName})),s=e.map((function(e){return e.roleId})),i=t.join(","),r=s.join(",");this.$set(this.form,"assignee",i),this.$set(this.form,"assigneeId",r),this.$refs.roleRef.visible=!1},clickDept:function(e){var t=e.map((function(e){return e.deptName})),s=e.map((function(e){return e.deptId})),i=t.join(","),r=s.join(",");this.$set(this.form,"assignee",i),this.$set(this.form,"assigneeId",r),this.$refs.deptRef.visible=!1},clickRule:function(e){this.$set(this.form,"assignee",e.beanName+"."+e.method),this.$set(this.form,"assigneeId",e.beanName+"."+e.method),this.$set(this.form,"businessRuleId",e.id),this.$refs.processRuleRef.visible=!1}}},f=p,h=(s("888e"),s("2877")),b=Object(h["a"])(f,i,r,!1,null,"333f9f01",null);t["default"]=b.exports},ffde:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.visible?s("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"业务规则",visible:e.visible,width:"60%","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t}}},[s("div",{staticClass:"app-container"},[s("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[s("el-form-item",{attrs:{label:"bean名称",prop:"beanName"}},[s("el-input",{attrs:{placeholder:"请输入bean名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.businessRule,callback:function(t){e.$set(e.queryParams,"businessRule",t)},expression:"queryParams.businessRule"}})],1),s("el-form-item",{attrs:{label:"方法名",prop:"method"}},[s("el-input",{attrs:{placeholder:"请输入方法名",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.method,callback:function(t){e.$set(e.queryParams,"method",t)},expression:"queryParams.method"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),s("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),s("el-row",{staticClass:"mb8",attrs:{gutter:10}},[s("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.businessRuleList,"highlight-current-row":!0},on:{"row-click":e.onRowClick}},[e._e(),s("el-table-column",{attrs:{label:"bean名称","show-overflow-tooltip":!0,align:"center",prop:"beanName"}}),s("el-table-column",{attrs:{label:"方法名","show-overflow-tooltip":!0,align:"center",prop:"method"}}),s("el-table-column",{attrs:{label:"备注","show-overflow-tooltip":!0,align:"center",prop:"remark"}})],1),s("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.primary}},[e._v("确认")]),s("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("取 消")])],1)]):e._e()},r=[],o=s("4e23"),a={props:{},name:"processRule",data:function(){return{visible:!1,buttonLoading:!1,loading:!0,showSearch:!0,total:0,businessRuleList:[],queryParams:{pageNum:1,pageSize:10,beanName:void 0,method:void 0},businessRuleParam:[],row:{}}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,Object(o["d"])(this.queryParams).then((function(t){e.businessRuleList=t.rows,e.total=t.total,e.loading=!1}))},cancel:function(){this.visible=!1,this.resetForm("queryForm")},handleQuery:function(){this.queryParams.pageNum=1,this.getList(),this.resetForm("queryForm")},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},onRowClick:function(e,t,s){this.row=e},primary:function(){this.$emit("primary",this.row)}}},n=a,l=s("2877"),c=Object(l["a"])(n,i,r,!1,null,null,null);t["default"]=c.exports}}]);